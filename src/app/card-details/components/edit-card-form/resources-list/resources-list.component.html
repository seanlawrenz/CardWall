<div *ngIf="resources" [formGroup]="formGroup">
  <ng-select
    class="select-sm"
    [items]="resources"
    [multiple]="true"
    [closeOnSelect]="false"
    bindLabel="name"
    placeholder="Assign resource responsible"
    formControlName="owners"
    [clearSearchOnAdd]="true"
  >
    <ng-template ng-multi-label-tmp let-resources="items" let-clear="clear">
      <div class="d-flex align-items-center ng-value" *ngFor="let resource of resources ? resources.slice(0, 2) : []">
        <span class="ng-value-label tdNg-flex-row-center">
          <td-profile-image [resource]="resource" imgClass="dropdown"></td-profile-image>
          <small>{{ resource.name }}</small>
        </span>
        <!-- Clear is callable. Known bug https://github.com/angular/angular/issues/16643 -->
        <span class="ng-value-icon right" (click)="clear(resource)" aria-hidden="true">Ã—</span>
      </div>

      <div class="ng-value" *ngIf="resources.length > 2">
        <span class="ng-value-label">{{ resources.length - 2 }} more...</span>
      </div>
    </ng-template>

    <ng-template ng-option-tmp let-resource="item">
      <div class="d-flex">
        <td-profile-image class="mr-2" [resource]="resource" imgClass="dropdown"></td-profile-image>
        {{ resource.name }}
      </div>
    </ng-template>
  </ng-select>
</div>
