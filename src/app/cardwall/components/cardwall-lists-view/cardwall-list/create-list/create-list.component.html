<div class="tdNg-cardwall-list-container">
  <div class="card">
    <div class="card-header tdNg-cardwall-list-header">
      <button
        id="addList"
        class="tdy-list-add-icon no-btn-style d-flex justify-content-start align-items-center"
        (click)="addListDialog.show()"
      >
        <span aria-hidden="true" class="fa fa-plus fa-lg green"></span>
        <h4 style="margin: 0">Add a List</h4>
      </button>
    </div>
  </div>
</div>

<div
  class="modal fade"
  bsModal
  #addListDialog="bs-modal"
  [config]="{ keyboard: true }"
  tabindex="-1"
  role="dialog"
  aria-labelledby="dialog-name"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="dialog-name" class="modal-title">Add List</h3>
        <button type="button" class="close pull-right" aria-label="Close" (click)="addListDialog.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form [formGroup]="createListForm" (submit)="addList()">
        <div class="modal-body">
          <div class="form-group required">
            <label class="control-label" for="listTitle">Title</label>
            <input
              type="text"
              class="form-control"
              id="listTitle"
              maxlength="255"
              formControlName="title"
              [ngClass]="{ 'is-invalid': createListForm.controls['title'].invalid && createListForm.controls['title'].touched }"
            />
            <div class="text-danger" *ngIf="createListForm.controls['title'].invalid && createListForm.controls['title'].touched">
              Title is required
            </div>
          </div>

          <div class="form-group">
            <label class="control-label" for="listDescription">Description</label>
            <textarea maxlength="1500" rows="4" class="form-control" id="listDescription" formControlName="description"></textarea>
          </div>

          <div class="form-group">
            <label class="control-label" for="listPercentComplete">Percent Complete</label>
            <div class="input-group">
              <input type="number" id="listPercentComplete" formControlName="percentComplete" min="0" max="100" class="form-control" />

              <div class="input-group-append"><span class="input-group-text">%</span></div>
            </div>
            <span class="form-text text-muted">
              When a card is moved into the list, the percent complete will be updated with this value if specified.
            </span>
          </div>

          <div class="form-group required">
            <label class="control-label" for="listStatusId">Status Type</label>
            <select
              class="form-control"
              id="listStatusId"
              formControlName="statusTypeId"
              [ngClass]="{
                'is-invalid': createListForm.controls['statusTypeId'].invalid && createListForm.controls['statusTypeId'].touched
              }"
            >
              <option label=""></option>
              <option value="1" label="New">New</option>
              <option value="2" label="In Process">In Process</option>
              <option value="3" label="Completed">Completed</option>
              <option value="4" label="Cancelled">Cancelled</option>
              <option value="5" label="On Hold">On Hold</option>
            </select>

            <div
              class="text-danger"
              *ngIf="createListForm.controls['statusTypeId'].invalid && createListForm.controls['statusTypeId'].touched"
            >
              Status Type is required
            </div>
          </div>

          <div class="form-row">
            <div class="col-md-8">
              <label class="sr-only" for="wipMinValue">Work In Progress Minimum</label>
              <div class="input-group">
                <input type="number" step="1" class="form-control" id="wipMinValue" formControlName="wipMin" placeholder="Minimum" />

                <label class="sr-only" for="wipMaxValue">Work In Progress Maximum</label>
                <input type="number" step="1" class="form-control" id="wipMaxValue" formControlName="wipMax" placeholder="Maximum" />
              </div>
            </div>

            <div class="col-md-4">
              <label for="listStatus">
                <input type="checkbox" name="listStatus" id="listStatus" formControlName="active" />
                Active
              </label>
            </div>
          </div>
          <div *ngIf="createListForm.hasError('invalidMinMax')" class="text-danger mt-2">Minimum cannot be greater than maximum.</div>
          <div *ngIf="createListForm.hasError('negativeMinMax')" class="text-danger mt-2">Negative numbers are not allowed.</div>
          <div *ngIf="createListForm.hasError('invalidMinMaxNumber')" class="text-danger mt-2">Valid values are whole numbers.</div>
        </div>

        <div class="modal-footer justify-content-start">
          <td-button icon="save" type="submit" cssClass="btn-primary" (onClick)="addListDialog.hide()" [disabled]="createListForm.invalid">
            Save
          </td-button>
          <td-button icon="times" cssClass="btn-danger" (onClick)="addListDialog.hide()">Cancel</td-button>
        </div>
      </form>
    </div>
  </div>
</div>
